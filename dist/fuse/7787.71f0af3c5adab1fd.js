"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[7787],{7787:(Tt,x,a)=>{a.r(x),a.d(x,{CryptoModule:()=>g});var S=a(3162),Q=a(1390),C=a(4859),I=a(811),y=a(9549),T=a(7392),Z=a(284),w=a(8255),D=a(4385),U=a(3267),h=a(6308),i=a(671),Y=a(3848),M=a(6205),B=a(4466),k=a(7579),m=a(4006),R=a(8288),t=a(4650),_=a(1135),E=a(8505),l=a(5597),b=a(529);class c{constructor(e){this._httpClient=e,this._data=new _.X(null)}get data$(){return this._data.asObservable()}getData(){return this._httpClient.get(l.d.API_PATH.concat("/v1/company")).pipe((0,E.b)(e=>{this._data.next(e)}))}createCompany(e){return this._httpClient.post(l.d.API_PATH+"/v1/company/create",e)}updateCompany(e,o){return this._httpClient.patch(l.d.API_PATH+"/v1/company/update/"+o,e)}deleteCompany(e){return this._httpClient.delete(l.d.API_PATH+"/v1/company/delete/"+e)}static#t=this.\u0275fac=function(o){return new(o||c)(t.LFG(b.eN))};static#e=this.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}var G=a(7915),V=a(3900),A=a(2843),H=a(9646),j=a(262);class p{constructor(e){this._httpClient=e,this.genericSearchApi=[{key:"company",apiValue:"/v1/company/search"},{key:"persons",apiValue:"/v1/persons/search"},{key:"proyect",apiValue:"/v1/proyect/search"}]}genericSearch(e,o){const n=this.genericSearchApi.filter(s=>s.key==o)[0];return this._httpClient.get(l.d.API_PATH+n.apiValue,{params:{searchValue:e}}).pipe((0,V.w)(s=>0==s.length?(0,A._)("Empty data"):(0,H.of)(s)),(0,j.K)(s=>(0,A._)("Error connection api",s)))}static#t=this.\u0275fac=function(o){return new(o||p)(t.LFG(b.eN))};static#e=this.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}var N=a(6895),F=a(4850),L=a(8214),J=a(266);const P=["registerCompanyNgForm"],z=["recentTransactionsTable"];function K(r,e){if(1&r&&(t.TgZ(0,"fuse-alert",45),t._uU(1),t.qZA()),2&r){const o=t.oxw();t.Q6J("appearance","outline")("showIcon",!1)("type",o.alertService.alert.type)("@shake","error"===o.alertService.alert.type),t.xp6(1),t.hij(" ",o.alertService.alert.message," ")}}function O(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.createCompany())}),t._uU(1," Guardar "),t.qZA()}2&r&&t.Q6J("color","primary")}function $(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.updateCompany())}),t._uU(1," Actualizar "),t.qZA()}2&r&&t.Q6J("color","primary")}function q(r,e){1&r&&(t.TgZ(0,"th",47),t._uU(1," Nombre "),t.qZA())}function X(r,e){if(1&r&&(t.TgZ(0,"td",48)(1,"span",49),t._uU(2),t.qZA()()),2&r){const o=e.$implicit;t.xp6(2),t.hij(" ",o.name," ")}}function W(r,e){1&r&&(t.TgZ(0,"th",47),t._uU(1," Nombre empresa "),t.qZA())}function tt(r,e){if(1&r&&(t.TgZ(0,"td",48)(1,"span",49),t._uU(2),t.qZA()()),2&r){const o=e.$implicit;t.xp6(2),t.hij(" ",o.commercialName," ")}}function et(r,e){1&r&&(t.TgZ(0,"th",47),t._uU(1," Ruc "),t.qZA())}function ot(r,e){if(1&r&&(t.TgZ(0,"td",48)(1,"span",49),t._uU(2),t.qZA()()),2&r){const o=e.$implicit;t.xp6(2),t.hij(" ",o.document," ")}}function rt(r,e){1&r&&(t.TgZ(0,"th",47),t._uU(1," Telefono "),t.qZA())}function at(r,e){if(1&r&&(t.TgZ(0,"td",48)(1,"span",49),t._uU(2),t.qZA()()),2&r){const o=e.$implicit;t.xp6(2),t.hij(" ",o.mobile," ")}}function nt(r,e){1&r&&(t.TgZ(0,"th",47),t._uU(1," Estado "),t.qZA())}const st=function(r,e){return{"bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50":r,"bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50":e}};function it(r,e){if(1&r&&(t.TgZ(0,"td",48)(1,"span",50)(2,"span",51),t._uU(3),t.qZA()()()),2&r){const o=e.$implicit;t.xp6(1),t.Q6J("ngClass",t.WLB(2,st,"REG"===o.status,"INA"===o.status)),t.xp6(2),t.Oqu(o.status)}}function mt(r,e){1&r&&(t.TgZ(0,"th",47),t._uU(1," Acciones "),t.qZA())}function ct(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"td",48)(1,"div")(2,"button",52),t.NdJ("click",function(){const d=t.CHM(o).$implicit,v=t.oxw();return t.KtG(v.editCompany(d))}),t.TgZ(3,"mat-icon"),t._uU(4,"edit"),t.qZA()(),t.TgZ(5,"button",53),t.NdJ("click",function(){const d=t.CHM(o).$implicit,v=t.oxw();return t.KtG(v.deleteCompany(d))}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA()()()()}}function lt(r,e){1&r&&t._UZ(0,"td",54)}function pt(r,e){1&r&&t._UZ(0,"tr",55)}function ut(r,e){1&r&&t._UZ(0,"tr",56)}function dt(r,e){1&r&&t._UZ(0,"tr",57)}const ht=function(){return["recentOrdersTableFooter"]};class f{constructor(e,o,n,s){this._cryptoService=e,this._formBuilder=o,this.alertService=n,this.searchService=s,this.recentTransactionsDataSource=new i.by,this.recentTransactionsTableColumns=["name","commercialName","document","mobile","status","actions"],this._unsubscribeAll=new k.x,this.updateCompanyBtn=!1,this.idCompany=0}ngOnInit(){this.alertService.showAlert=!1,this.registerCompanyForm=this._formBuilder.group({name:["",m.kI.required],commercialName:["",[m.kI.required]],document:["",m.kI.required],phone:["",m.kI.required],mobile:["",m.kI.required],representativeName:["",m.kI.required],representativeLastname:["",m.kI.required],representativeDocument:["",m.kI.required]}),this.getAllCompanies()}getAllCompanies(){this.data=[],this.recentTransactionsDataSource.data=[],this._cryptoService.getData().subscribe(e=>{this.data=e,this.recentTransactionsDataSource.data=e.reverse()},e=>{this.alertService.showAlertMessage("error",e.error.message,!0)})}createCompany(){this.registerCompanyForm.invalid?this.alertService.showAlertMessage("error","Debe de completar todos los campos",!0):(this.registerCompanyForm.disable(),this._cryptoService.createCompany(this.buildCompanyModel()).subscribe(e=>{this.alertService.showAlertMessage("success","Registro creado exitosamente",!0),this.registerCompanyForm.enable(),this.registerCompanyForm.reset(),this.registerCompanyNgForm.resetForm(),this.getAllCompanies()},e=>{this.alertService.showAlertMessage("error",e.error.message,!0),this.registerCompanyForm.enable()}))}editCompany(e){this.updateCompanyBtn=!0,this.registerCompanyForm.get("name").setValue(e.name),this.registerCompanyForm.get("commercialName").setValue(e.commercialName),this.registerCompanyForm.get("document").setValue(e.document),this.registerCompanyForm.get("phone").setValue(e.phone),this.registerCompanyForm.get("mobile").setValue(e.mobile),this.registerCompanyForm.get("representativeName").setValue(e.legalRepresentative.person.name),this.registerCompanyForm.get("representativeLastname").setValue(e.legalRepresentative.person.lastName),this.registerCompanyForm.get("representativeDocument").setValue(e.legalRepresentative.person.document),this.idCompany=e.id}updateCompany(){this.registerCompanyForm.invalid?this.alertService.showAlertMessage("error","Debe de completar todos los campos",!0):(this.registerCompanyForm.disable(),this._cryptoService.updateCompany(this.buildCompanyModel(),this.idCompany).subscribe(e=>{this.alertService.showAlertMessage("success","Registro actualizado exitosamente",!0),this.registerCompanyForm.enable(),this.registerCompanyForm.reset(),this.registerCompanyNgForm.resetForm(),this.clearFilters(),this.getAllCompanies()},e=>{this.alertService.showAlertMessage("error",e.error.message,!0),this.registerCompanyForm.enable()}))}buildCompanyModel(){return{name:this.registerCompanyForm.value.name,commercialName:this.registerCompanyForm.value.commercialName,document:this.registerCompanyForm.value.document,mobile:this.registerCompanyForm.value.mobile,phone:this.registerCompanyForm.value.mobile,legalRepresentative:{person:{name:this.registerCompanyForm.value.representativeName,lastName:this.registerCompanyForm.value.representativeLastname,document:this.registerCompanyForm.value.representativeDocument}}}}deleteCompany(e){this._cryptoService.deleteCompany(e.id).subscribe(o=>{this.alertService.showAlertMessage("success","Registro eliminado exitosamente",!0),this.getAllCompanies()},o=>{this.alertService.showAlertMessage("error",o.error.message,!0)})}searchCompany(e){"Enter"==e.code&&this.searchService.genericSearch(e.target.value,"company").subscribe(o=>{this.data=o,this.recentTransactionsDataSource.data=o.reverse()},o=>{this.alertService.showAlertMessage("error","Busqueda sin registros",!0)})}clearFilters(){this.updateCompanyBtn=!1,this.registerCompanyForm.enable(),this.registerCompanyForm.reset(),this.registerCompanyNgForm.resetForm(),this.alertService.showAlert=!1}ngAfterViewInit(){this.recentTransactionsDataSource.sort=this.recentTransactionsTableMatSort}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}trackByFn(e,o){return o.id||e}static#t=this.\u0275fac=function(o){return new(o||f)(t.Y36(c),t.Y36(m.QS),t.Y36(G.c),t.Y36(p))};static#e=this.\u0275cmp=t.Xpm({type:f,selectors:[["crypto"]],viewQuery:function(o,n){if(1&o&&(t.Gf(P,5),t.Gf(z,5,h.YE)),2&o){let s;t.iGM(s=t.CRH())&&(n.registerCompanyNgForm=s.first),t.iGM(s=t.CRH())&&(n.recentTransactionsTableMatSort=s.first)}},decls:85,vars:39,consts:[[1,"flex","flex-col","flex-auto","w-full"],[1,"flex","flex-wrap","w-full","max-w-screen-xl","mx-auto","p-6","md:p-8"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-8","w-full","mt-8"],[1,"flex","items-center"],[1,"flex","flex-col","flex-auto","p-6","bg-card","rounded-2xl","shadow","overflow-hidden",3,"formGroup"],["registerCompanyNgForm","ngForm"],[1,"text-lg","font-medium"],["class","mt-8",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-6","mb-10"],[1,"flex"],[1,"flex-auto"],["matInput","",3,"placeholder","formControlName"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[1,"flex","flex-col","gt-xs:flex-row"],[1,"flex-auto","gt-xs:pr-3"],[1,"flex-auto","gt-xs:pl-3"],["matInput","","type","number",3,"placeholder","formControlName"],[1,"flex","items-center","justify-end","border-t","-mx-8","mt-8","px-8","py-5","bg-gray-50","dark:bg-gray-700"],["type","reset","mat-button","",3,"click"],["class","px-6 ml-3","mat-flat-button","",3,"color","click",4,"ngIf"],[1,"xl:col-span-2","flex","flex-col","flex-auto","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"overflow-x-auto","mx-6"],[1,"flex","items-center","mt-4","sm:mt-0","md:mt-4"],["subscriptSizing","dynamic",1,"fuse-mat-dense","fuse-mat-rounded","w-full","min-w-50"],["matInput","",3,"autocomplete","placeholder","keypress"],["mat-flat-button","",1,"ml-4",3,"color"],[3,"svgIcon"],[1,"ml-2","mr-1"],["mat-table","","matSort","",1,"w-full","bg-transparent",3,"dataSource","trackBy"],["recentTransactionsTable",""],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","commercialName"],["matColumnDef","document"],["matColumnDef","mobile"],["matColumnDef","status"],["matColumnDef","actions"],["matColumnDef","recentOrdersTableFooter"],["class","py-6 px-0 border-0","mat-footer-cell","","colspan","6",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","order-row h-16","mat-row","",4,"matRowDef","matRowDefColumns"],["class","h-16 border-0","mat-footer-row","",4,"matFooterRowDef"],[1,"mt-8",3,"appearance","showIcon","type"],["mat-flat-button","",1,"px-6","ml-3",3,"color","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"pr-6","font-medium","text-sm","text-secondary","whitespace-nowrap"],[1,"inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide","uppercase",3,"ngClass"],[1,"leading-relaxed","whitespace-nowrap"],["matTooltip","Editar registro","mat","","mat-icon-button","","color","primary","aria-label","Example icon button with a vertical three dot icon",3,"click"],["type","submit","matTooltip","Eliminar registro","mat-icon-button","","color","warn","aria-label","Example icon button with a vertical three dot icon",3,"click"],["mat-footer-cell","","colspan","6",1,"py-6","px-0","border-0"],["mat-header-row",""],["mat-row","",1,"order-row","h-16"],["mat-footer-row","",1,"h-16","border-0"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h2",3),t._uU(5,"Empresas registradas"),t.qZA()()(),t.TgZ(6,"div",4)(7,"div",5)(8,"form",6,7)(10,"p",8),t._uU(11,"Nueva Empresa"),t.qZA(),t.YNc(12,K,2,5,"fuse-alert",9),t._UZ(13,"mat-divider",10),t.TgZ(14,"div",11)(15,"mat-form-field",12),t._UZ(16,"input",13)(17,"mat-icon",14),t.qZA()(),t.TgZ(18,"div",15)(19,"mat-form-field",16),t._UZ(20,"input",13)(21,"mat-icon",14),t.qZA(),t.TgZ(22,"mat-form-field",17),t._UZ(23,"input",18)(24,"mat-icon",14),t.qZA(),t.TgZ(25,"mat-form-field",17),t._UZ(26,"input",18)(27,"mat-icon",14),t.qZA(),t.TgZ(28,"mat-form-field",17),t._UZ(29,"input",18)(30,"mat-icon",14),t.qZA()(),t.TgZ(31,"p",8),t._uU(32,"Representante Legal"),t.qZA(),t._UZ(33,"mat-divider",10),t.TgZ(34,"div",15)(35,"mat-form-field",17),t._UZ(36,"input",13)(37,"mat-icon",14),t.qZA(),t.TgZ(38,"mat-form-field",16),t._UZ(39,"input",13)(40,"mat-icon",14),t.qZA(),t.TgZ(41,"mat-form-field",17),t._UZ(42,"input",18)(43,"mat-icon",14),t.qZA()(),t.TgZ(44,"div",19)(45,"button",20),t.NdJ("click",function(){return n.clearFilters()}),t._uU(46," Cancelar "),t.qZA(),t.YNc(47,O,2,1,"button",21),t.YNc(48,$,2,1,"button",21),t.qZA()()(),t.TgZ(49,"div",22)(50,"div",23)(51,"div",24)(52,"div",12)(53,"mat-form-field",25),t._UZ(54,"mat-icon",14),t.TgZ(55,"input",26),t.NdJ("keypress",function(d){return n.searchCompany(d)}),t.qZA()()(),t.TgZ(56,"button",27),t._UZ(57,"mat-icon",28),t.TgZ(58,"span",29),t._uU(59,"Buscar"),t.qZA()()(),t.TgZ(60,"table",30,31),t.ynx(62,32),t.YNc(63,q,2,0,"th",33),t.YNc(64,X,3,1,"td",34),t.BQk(),t.ynx(65,35),t.YNc(66,W,2,0,"th",33),t.YNc(67,tt,3,1,"td",34),t.BQk(),t.ynx(68,36),t.YNc(69,et,2,0,"th",33),t.YNc(70,ot,3,1,"td",34),t.BQk(),t.ynx(71,37),t.YNc(72,rt,2,0,"th",33),t.YNc(73,at,3,1,"td",34),t.BQk(),t.ynx(74,38),t.YNc(75,nt,2,0,"th",33),t.YNc(76,it,4,5,"td",34),t.BQk(),t.ynx(77,39),t.YNc(78,mt,2,0,"th",33),t.YNc(79,ct,8,0,"td",34),t.BQk(),t.ynx(80,40),t.YNc(81,lt,1,0,"td",41),t.BQk(),t.YNc(82,pt,1,0,"tr",42),t.YNc(83,ut,1,0,"tr",43),t.YNc(84,dt,1,0,"tr",44),t.qZA()()()()()()),2&o&&(t.xp6(8),t.Q6J("formGroup",n.registerCompanyForm),t.xp6(4),t.Q6J("ngIf",n.alertService.showAlert),t.xp6(4),t.Q6J("placeholder","Nombre")("formControlName","name"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:user-circle"),t.xp6(3),t.Q6J("placeholder","Nombre Comercial")("formControlName","commercialName"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:office-building"),t.xp6(2),t.Q6J("placeholder","Ruc")("formControlName","document"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:identification"),t.xp6(2),t.Q6J("placeholder","Telefono")("formControlName","phone"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:phone"),t.xp6(2),t.Q6J("placeholder","Celular")("formControlName","mobile"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:device-mobile"),t.xp6(6),t.Q6J("placeholder","Nombre")("formControlName","representativeName"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:user-circle"),t.xp6(2),t.Q6J("placeholder","Apellido")("formControlName","representativeLastname"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:user-circle"),t.xp6(2),t.Q6J("placeholder","Documento")("formControlName","representativeDocument"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:identification"),t.xp6(4),t.Q6J("ngIf",!n.updateCompanyBtn),t.xp6(1),t.Q6J("ngIf",n.updateCompanyBtn),t.xp6(6),t.Q6J("svgIcon","heroicons_solid:search"),t.xp6(1),t.Q6J("autocomplete","off")("placeholder","Buscar empresa"),t.xp6(1),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:search"),t.xp6(3),t.Q6J("dataSource",n.recentTransactionsDataSource)("trackBy",n.trackByFn),t.xp6(22),t.Q6J("matHeaderRowDef",n.recentTransactionsTableColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.recentTransactionsTableColumns),t.xp6(1),t.Q6J("matFooterRowDef",t.DdM(38,ht)))},dependencies:[C.lW,C.RK,y.KE,y.qo,T.Hw,Z.Nt,h.YE,h.nU,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.mD,i.Ke,i.ge,i.ev,i.yh,i.XQ,i.Gk,i.Q2,N.mk,N.O5,m._Y,m.Fj,m.wV,m.JJ,m.JL,m.sg,m.u,F.d,L.W,J.gM],encapsulation:2,data:{animation:R.L},changeDetection:0})}class u{constructor(e){this._cryptoService=e}resolve(e,o){return this._cryptoService.getData()}static#t=this.\u0275fac=function(o){return new(o||u)(t.LFG(c))};static#e=this.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}const ft=[{path:"",component:f,resolve:{data:u}}];var gt=a(6709),Ct=a(1948),yt=a(5804),vt=a(7775),xt=a(1572);class g{static#t=this.\u0275fac=function(o){return new(o||g)};static#e=this.\u0275mod=t.oAB({type:g});static#o=this.\u0275inj=t.cJS({imports:[Q.Bz.forChild(ft),C.ot,I.vV,y.lN,T.Ps,Z.c,w.Tx,D.LD,U.SJ,h.JX,i.p0,Y.Nh,M.X,B.m,S.Cv,F.t,gt.p9,Ct.Fk,yt.J,vt.fC,J.AV,xt.Cq]})}}}]);